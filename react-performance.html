<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactæ€§èƒ½ä¼˜åŒ–å®Œæ•´æŒ‡å— - Tawy2025</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="article.css">
    <link rel="stylesheet" href="css/force-stable.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="js/anti-flicker.js"></script>
    <script src="js/related-articles-fix.js"></script>
    <script src="js/ultimate-fix.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">Tawy2025</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html#home" class="nav-link">é¦–é¡µ</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#about" class="nav-link">å…³äºæˆ‘</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#articles" class="nav-link">æ–‡ç« </a>
                </li>
                <li class="nav-item">
                    <a href="index.html#projects" class="nav-link">é¡¹ç›®</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#contact" class="nav-link">è”ç³»æˆ‘</a>
                </li>
            </ul>
            <div class="nav-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- æ–‡ç« å¤´éƒ¨ -->
    <header class="article-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html">é¦–é¡µ</a>
                <span>/</span>
                <a href="index.html#articles">æ–‡ç« </a>
                <span>/</span>
                <span>Reactæ€§èƒ½ä¼˜åŒ–å®Œæ•´æŒ‡å—</span>
            </div>
            <h1 class="article-title">Reactæ€§èƒ½ä¼˜åŒ–å®Œæ•´æŒ‡å—</h1>
            <div class="article-meta">
                <div class="meta-item">
                    <i class="fas fa-calendar"></i>
                    <span>2025å¹´8æœˆ9æ—¥</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-tag"></i>
                    <span>React</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>é˜…è¯»æ—¶é—´: 15åˆ†é’Ÿ</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-eye"></i>
                    <span>æµè§ˆ: 3,421æ¬¡</span>
                </div>
            </div>
        </div>
    </header>

    <!-- æ–‡ç« å†…å®¹ -->
    <main class="article-main">
        <div class="container">
            <div class="article-layout">
                <!-- æ–‡ç« å†…å®¹ -->
                <article class="article-content">
                    <div class="article-summary">
                        <h2>æ–‡ç« æ‘˜è¦</h2>
                        <p>å…¨é¢æ·±å…¥åœ°æ¢è®¨Reactåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œä»åŸºç¡€çš„æ¸²æŸ“ä¼˜åŒ–åˆ°é«˜çº§çš„ä»£ç åˆ†å‰²æŠ€æœ¯ï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºé«˜æ€§èƒ½çš„Reactåº”ç”¨ã€‚åŒ…å«å®é™…æ¡ˆä¾‹å’Œæ€§èƒ½æµ‹è¯•æ–¹æ³•ã€‚</p>
                    </div>

                    <div class="article-toc">
                        <h3>ç›®å½•</h3>
                        <ul>
                            <li><a href="#introduction">1. æ€§èƒ½ä¼˜åŒ–æ¦‚è¿°</a></li>
                            <li><a href="#rendering">2. æ¸²æŸ“ä¼˜åŒ–</a></li>
                            <li><a href="#memoization">3. è®°å¿†åŒ–æŠ€æœ¯</a></li>
                            <li><a href="#code-splitting">4. ä»£ç åˆ†å‰²</a></li>
                            <li><a href="#state-management">5. çŠ¶æ€ç®¡ç†ä¼˜åŒ–</a></li>
                            <li><a href="#measurement">6. æ€§èƒ½æµ‹é‡</a></li>
                        </ul>
                    </div>

                    <section id="introduction">
                        <h2>1. æ€§èƒ½ä¼˜åŒ–æ¦‚è¿°</h2>
                        <p>Reactåº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œéœ€è¦ä»å¤šä¸ªç»´åº¦è¿›è¡Œè€ƒè™‘å’Œå®æ–½ã€‚</p>
                        
                        <blockquote>
                            "è¿‡æ—©çš„ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºï¼Œä½†åˆç†çš„ä¼˜åŒ–æ˜¯å¿…è¦çš„ã€‚"
                        </blockquote>
                        
                        <h3>1.1 æ€§èƒ½é—®é¢˜çš„å¸¸è§è¡¨ç°</h3>
                        <ul>
                            <li>é¡µé¢åŠ è½½ç¼“æ…¢</li>
                            <li>ç”¨æˆ·äº¤äº’å“åº”å»¶è¿Ÿ</li>
                            <li>æ»šåŠ¨ä¸æµç•…</li>
                            <li>å†…å­˜æ³„æ¼</li>
                            <li>CPUä½¿ç”¨ç‡è¿‡é«˜</li>
                        </ul>

                        <h3>1.2 ä¼˜åŒ–ç­–ç•¥åˆ†ç±»</h3>
                        <pre><code class="language-javascript">// æ€§èƒ½ä¼˜åŒ–çš„ä¸»è¦æ–¹å‘
const optimizationStrategies = {
    rendering: 'æ¸²æŸ“ä¼˜åŒ–',
    bundling: 'æ‰“åŒ…ä¼˜åŒ–', 
    caching: 'ç¼“å­˜ç­–ç•¥',
    loading: 'åŠ è½½ä¼˜åŒ–',
    memory: 'å†…å­˜ç®¡ç†'
};</code></pre>
                    </section>

                    <section id="rendering">
                        <h2>2. æ¸²æŸ“ä¼˜åŒ–</h2>
                        <p>æ¸²æŸ“ä¼˜åŒ–æ˜¯Reactæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œä¸»è¦é€šè¿‡å‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“æ¥æå‡æ€§èƒ½ã€‚</p>
                        
                        <h3>2.1 React.memoçš„ä½¿ç”¨</h3>
                        <pre><code class="language-jsx">// ä½¿ç”¨React.memoé˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
import React, { memo } from 'react';

// æ™®é€šç»„ä»¶ - æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°éƒ½ä¼šé‡æ–°æ¸²æŸ“
const ExpensiveComponent = ({ data, onUpdate }) => {
    console.log('ExpensiveComponent æ¸²æŸ“'); // ä¼šé¢‘ç¹æ‰“å°
    
    return (
        &lt;div&gt;
            {data.map(item => (
                &lt;div key={item.id}&gt;{item.name}&lt;/div&gt;
            ))}
            &lt;button onClick={onUpdate}&gt;æ›´æ–°&lt;/button&gt;
        &lt;/div&gt;
    );
};

// ä¼˜åŒ–åçš„ç»„ä»¶ - åªæœ‰propså˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“
const OptimizedComponent = memo(({ data, onUpdate }) => {
    console.log('OptimizedComponent æ¸²æŸ“'); // åªåœ¨å¿…è¦æ—¶æ‰“å°
    
    return (
        &lt;div&gt;
            {data.map(item => (
                &lt;div key={item.id}&gt;{item.name}&lt;/div&gt;
            ))}
            &lt;button onClick={onUpdate}&gt;æ›´æ–°&lt;/button&gt;
        &lt;/div&gt;
    );
});

// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
const DeepOptimizedComponent = memo(({ data, config }) => {
    return (
        &lt;div&gt;
            {/* ç»„ä»¶å†…å®¹ */}
        &lt;/div&gt;
    );
}, (prevProps, nextProps) => {
    // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘
    return (
        prevProps.data.length === nextProps.data.length &&
        prevProps.config.theme === nextProps.config.theme
    );
});</code></pre>

                        <h3>2.2 useMemoå’ŒuseCallback</h3>
                        <pre><code class="language-jsx">import React, { useMemo, useCallback, useState } from 'react';

const DataVisualization = ({ rawData, filters }) => {
    const [sortOrder, setSortOrder] = useState('asc');
    
    // ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
    const processedData = useMemo(() => {
        console.log('å¤„ç†æ•°æ®...'); // åªåœ¨ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ
        
        return rawData
            .filter(item => filters.includes(item.category))
            .sort((a, b) => {
                return sortOrder === 'asc' 
                    ? a.value - b.value 
                    : b.value - a.value;
            })
            .map(item => ({
                ...item,
                formattedValue: item.value.toLocaleString()
            }));
    }, [rawData, filters, sortOrder]);
    
    // ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
    const handleSort = useCallback((newOrder) => {
        setSortOrder(newOrder);
    }, []);
    
    const handleItemClick = useCallback((itemId) => {
        console.log('ç‚¹å‡»é¡¹ç›®:', itemId);
        // å¤„ç†ç‚¹å‡»é€»è¾‘
    }, []);
    
    return (
        &lt;div&gt;
            &lt;SortControls onSort={handleSort} currentOrder={sortOrder} /&gt;
            &lt;DataList 
                data={processedData} 
                onItemClick={handleItemClick}
            /&gt;
        &lt;/div&gt;
    );
};

// å­ç»„ä»¶ä¹Ÿéœ€è¦ä¼˜åŒ–
const SortControls = memo(({ onSort, currentOrder }) => {
    return (
        &lt;div&gt;
            &lt;button 
                onClick={() => onSort('asc')}
                className={currentOrder === 'asc' ? 'active' : ''}
            &gt;
                å‡åº
            &lt;/button&gt;
            &lt;button 
                onClick={() => onSort('desc')}
                className={currentOrder === 'desc' ? 'active' : ''}
            &gt;
                é™åº
            &lt;/button&gt;
        &lt;/div&gt;
    );
});</code></pre>
                    </section>

                    <section id="memoization">
                        <h2>3. è®°å¿†åŒ–æŠ€æœ¯</h2>
                        <p>è®°å¿†åŒ–æ˜¯ä¸€ç§é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥é¿å…é‡å¤è®¡ç®—å’Œæ¸²æŸ“ã€‚</p>
                        
                        <h3>3.1 å¤æ‚è®¡ç®—çš„è®°å¿†åŒ–</h3>
                        <pre><code class="language-jsx">import React, { useMemo } from 'react';

// å¤æ‚çš„æ•°æ®å¤„ç†å‡½æ•°
const processLargeDataset = (data, config) => {
    console.log('æ‰§è¡Œå¤æ‚è®¡ç®—...');
    
    // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
    return data
        .filter(item => item.active)
        .map(item => {
            // å¤æ‚çš„æ•°æ®è½¬æ¢
            const processed = {
                ...item,
                score: calculateScore(item, config),
                trend: calculateTrend(item.history),
                recommendations: generateRecommendations(item)
            };
            
            return processed;
        })
        .sort((a, b) => b.score - a.score);
};

const AnalyticsDashboard = ({ data, config, timeRange }) => {
    // è®°å¿†åŒ–å¤æ‚è®¡ç®—
    const processedAnalytics = useMemo(() => {
        return processLargeDataset(data, config);
    }, [data, config]); // æ³¨æ„ï¼štimeRangeæ²¡æœ‰åŒ…å«åœ¨ä¾èµ–ä¸­
    
    // åŸºäºæ—¶é—´èŒƒå›´çš„è¿‡æ»¤ï¼ˆè½»é‡çº§è®¡ç®—ï¼Œä¸éœ€è¦è®°å¿†åŒ–ï¼‰
    const filteredData = processedAnalytics.filter(item => {
        return item.timestamp >= timeRange.start && 
               item.timestamp <= timeRange.end;
    });
    
    return (
        &lt;div&gt;
            &lt;h2&gt;åˆ†ææŠ¥å‘Š&lt;/h2&gt;
            {filteredData.map(item => (
                &lt;AnalyticsCard key={item.id} data={item} /&gt;
            ))}
        &lt;/div&gt;
    );
};</code></pre>

                        <h3>3.2 è‡ªå®šä¹‰è®°å¿†åŒ–Hook</h3>
                        <pre><code class="language-jsx">import { useRef, useCallback } from 'react';

// è‡ªå®šä¹‰è®°å¿†åŒ–Hookï¼Œæ”¯æŒå¤šå‚æ•°
function useMemorize(fn, deps) {
    const cache = useRef(new Map());
    
    return useCallback((...args) => {
        const key = JSON.stringify([...args, ...deps]);
        
        if (cache.current.has(key)) {
            console.log('ç¼“å­˜å‘½ä¸­');
            return cache.current.get(key);
        }
        
        console.log('è®¡ç®—æ–°ç»“æœ');
        const result = fn(...args);
        cache.current.set(key, result);
        
        // é™åˆ¶ç¼“å­˜å¤§å°
        if (cache.current.size > 100) {
            const firstKey = cache.current.keys().next().value;
            cache.current.delete(firstKey);
        }
        
        return result;
    }, deps);
}

// ä½¿ç”¨ç¤ºä¾‹
const SearchResults = ({ query, filters, sortBy }) => {
    const searchFunction = useMemorize((q, f, s) => {
        // å¤æ‚çš„æœç´¢é€»è¾‘
        return performSearch(q, f, s);
    }, []);
    
    const results = searchFunction(query, filters, sortBy);
    
    return (
        &lt;div&gt;
            {results.map(item => (
                &lt;SearchResultItem key={item.id} item={item} /&gt;
            ))}
        &lt;/div&gt;
    );
};</code></pre>
                    </section>

                    <section id="code-splitting">
                        <h2>4. ä»£ç åˆ†å‰²</h2>
                        <p>ä»£ç åˆ†å‰²å¯ä»¥æ˜¾è‘—å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
                        
                        <h3>4.1 è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²</h3>
                        <pre><code class="language-jsx">import React, { Suspense, lazy } from 'react';
import { Routes, Route } from 'react-router-dom';

// æ‡’åŠ è½½ç»„ä»¶
const Home = lazy(() => import('./pages/Home'));
const Dashboard = lazy(() => import('./pages/Dashboard'));
const Profile = lazy(() => import('./pages/Profile'));
const Settings = lazy(() => import('./pages/Settings'));

// åŠ è½½å¤±è´¥æ—¶çš„é”™è¯¯è¾¹ç•Œ
class LazyLoadErrorBoundary extends React.Component {
    constructor(props) {
        super(props);
        this.state = { hasError: false };
    }
    
    static getDerivedStateFromError(error) {
        return { hasError: true };
    }
    
    componentDidCatch(error, errorInfo) {
        console.error('æ‡’åŠ è½½å¤±è´¥:', error, errorInfo);
    }
    
    render() {
        if (this.state.hasError) {
            return (
                &lt;div className="error-fallback"&gt;
                    &lt;h2&gt;é¡µé¢åŠ è½½å¤±è´¥&lt;/h2&gt;
                    &lt;button onClick={() => window.location.reload()}&gt;
                        é‡æ–°åŠ è½½
                    &lt;/button&gt;
                &lt;/div&gt;
            );
        }
        
        return this.props.children;
    }
}

// åŠ è½½ä¸­ç»„ä»¶
const LoadingSpinner = () => (
    &lt;div className="loading-container"&gt;
        &lt;div className="spinner"&gt;&lt;/div&gt;
        &lt;p&gt;åŠ è½½ä¸­...&lt;/p&gt;
    &lt;/div&gt;
);

const App = () => {
    return (
        &lt;LazyLoadErrorBoundary&gt;
            &lt;Suspense fallback={&lt;LoadingSpinner /&gt;}&gt;
                &lt;Routes&gt;
                    &lt;Route path="/" element={&lt;Home /&gt;} /&gt;
                    &lt;Route path="/dashboard" element={&lt;Dashboard /&gt;} /&gt;
                    &lt;Route path="/profile" element={&lt;Profile /&gt;} /&gt;
                    &lt;Route path="/settings" element={&lt;Settings /&gt;} /&gt;
                &lt;/Routes&gt;
            &lt;/Suspense&gt;
        &lt;/LazyLoadErrorBoundary&gt;
    );
};</code></pre>

                        <h3>4.2 ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½</h3>
                        <pre><code class="language-jsx">import React, { useState, Suspense, lazy } from 'react';

// æ‡’åŠ è½½é‡å‹ç»„ä»¶
const HeavyChart = lazy(() => import('./components/HeavyChart'));
const DataTable = lazy(() => import('./components/DataTable'));
const ExportModal = lazy(() => import('./components/ExportModal'));

const Dashboard = () => {
    const [activeTab, setActiveTab] = useState('overview');
    const [showExportModal, setShowExportModal] = useState(false);
    
    return (
        &lt;div className="dashboard"&gt;
            &lt;div className="dashboard-header"&gt;
                &lt;h1&gt;æ•°æ®ä»ªè¡¨æ¿&lt;/h1&gt;
                &lt;button onClick={() => setShowExportModal(true)}&gt;
                    å¯¼å‡ºæ•°æ®
                &lt;/button&gt;
            &lt;/div&gt;
            
            &lt;div className="dashboard-tabs"&gt;
                &lt;button 
                    onClick={() => setActiveTab('overview')}
                    className={activeTab === 'overview' ? 'active' : ''}
                &gt;
                    æ¦‚è§ˆ
                &lt;/button&gt;
                &lt;button 
                    onClick={() => setActiveTab('charts')}
                    className={activeTab === 'charts' ? 'active' : ''}
                &gt;
                    å›¾è¡¨
                &lt;/button&gt;
                &lt;button 
                    onClick={() => setActiveTab('data')}
                    className={activeTab === 'data' ? 'active' : ''}
                &gt;
                    æ•°æ®è¡¨
                &lt;/button&gt;
            &lt;/div&gt;
            
            &lt;div className="dashboard-content"&gt;
                {activeTab === 'overview' && (
                    &lt;div&gt;æ¦‚è§ˆå†…å®¹...&lt;/div&gt;
                )}
                
                {activeTab === 'charts' && (
                    &lt;Suspense fallback={&lt;div&gt;åŠ è½½å›¾è¡¨ä¸­...&lt;/div&gt;}&gt;
                        &lt;HeavyChart /&gt;
                    &lt;/Suspense&gt;
                )}
                
                {activeTab === 'data' && (
                    &lt;Suspense fallback={&lt;div&gt;åŠ è½½æ•°æ®è¡¨ä¸­...&lt;/div&gt;}&gt;
                        &lt;DataTable /&gt;
                    &lt;/Suspense&gt;
                )}
            &lt;/div&gt;
            
            {showExportModal && (
                &lt;Suspense fallback={&lt;div&gt;åŠ è½½å¯¼å‡ºåŠŸèƒ½...&lt;/div&gt;}&gt;
                    &lt;ExportModal onClose={() => setShowExportModal(false)} /&gt;
                &lt;/Suspense&gt;
            )}
        &lt;/div&gt;
    );
};</code></pre>
                    </section>

                    <section id="state-management">
                        <h2>5. çŠ¶æ€ç®¡ç†ä¼˜åŒ–</h2>
                        <p>åˆç†çš„çŠ¶æ€ç®¡ç†å¯ä»¥é¿å…ä¸å¿…è¦çš„æ¸²æŸ“å’Œè®¡ç®—ã€‚</p>
                        
                        <h3>5.1 çŠ¶æ€åˆ†ç¦»å’Œå±€éƒ¨åŒ–</h3>
                        <pre><code class="language-jsx">// âŒ é”™è¯¯åšæ³•ï¼šæ‰€æœ‰çŠ¶æ€éƒ½æ”¾åœ¨é¡¶å±‚
const BadApp = () => {
    const [userProfile, setUserProfile] = useState({});
    const [dashboardData, setDashboardData] = useState([]);
    const [modalVisible, setModalVisible] = useState(false);
    const [formData, setFormData] = useState({});
    const [searchQuery, setSearchQuery] = useState('');
    
    // ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½ä¼šå¯¼è‡´æ•´ä¸ªAppé‡æ–°æ¸²æŸ“
    return (
        &lt;div&gt;
            &lt;Header user={userProfile} /&gt;
            &lt;Dashboard data={dashboardData} /&gt;
            &lt;SearchBox query={searchQuery} onChange={setSearchQuery} /&gt;
            {modalVisible && &lt;Modal data={formData} /&gt;}
        &lt;/div&gt;
    );
};

// âœ… æ­£ç¡®åšæ³•ï¼šçŠ¶æ€å±€éƒ¨åŒ–
const GoodApp = () => {
    const [userProfile, setUserProfile] = useState({});
    
    return (
        &lt;div&gt;
            &lt;Header user={userProfile} /&gt;
            &lt;DashboardContainer /&gt; {/* å†…éƒ¨ç®¡ç†è‡ªå·±çš„çŠ¶æ€ */}
            &lt;SearchContainer /&gt;   {/* å†…éƒ¨ç®¡ç†è‡ªå·±çš„çŠ¶æ€ */}
        &lt;/div&gt;
    );
};

// ç‹¬ç«‹çš„Dashboardå®¹å™¨
const DashboardContainer = () => {
    const [dashboardData, setDashboardData] = useState([]);
    const [loading, setLoading] = useState(false);
    
    return &lt;Dashboard data={dashboardData} loading={loading} /&gt;;
};

// ç‹¬ç«‹çš„æœç´¢å®¹å™¨
const SearchContainer = () => {
    const [query, setQuery] = useState('');
    const [results, setResults] = useState([]);
    
    return (
        &lt;div&gt;
            &lt;SearchBox query={query} onChange={setQuery} /&gt;
            &lt;SearchResults results={results} /&gt;
        &lt;/div&gt;
    );
};</code></pre>

                        <h3>5.2 ä½¿ç”¨useReducerç®¡ç†å¤æ‚çŠ¶æ€</h3>
                        <pre><code class="language-jsx">import React, { useReducer, useMemo } from 'react';

// å¤æ‚çŠ¶æ€çš„reducer
const todoReducer = (state, action) => {
    switch (action.type) {
        case 'ADD_TODO':
            return {
                ...state,
                todos: [...state.todos, {
                    id: Date.now(),
                    text: action.payload,
                    completed: false,
                    createdAt: new Date()
                }]
            };
            
        case 'TOGGLE_TODO':
            return {
                ...state,
                todos: state.todos.map(todo =>
                    todo.id === action.payload
                        ? { ...todo, completed: !todo.completed }
                        : todo
                )
            };
            
        case 'DELETE_TODO':
            return {
                ...state,
                todos: state.todos.filter(todo => todo.id !== action.payload)
            };
            
        case 'SET_FILTER':
            return {
                ...state,
                filter: action.payload
            };
            
        default:
            return state;
    }
};

const TodoApp = () => {
    const [state, dispatch] = useReducer(todoReducer, {
        todos: [],
        filter: 'all' // 'all', 'active', 'completed'
    });
    
    // ä½¿ç”¨useMemoç¼“å­˜è¿‡æ»¤åçš„todos
    const filteredTodos = useMemo(() => {
        switch (state.filter) {
            case 'active':
                return state.todos.filter(todo => !todo.completed);
            case 'completed':
                return state.todos.filter(todo => todo.completed);
            default:
                return state.todos;
        }
    }, [state.todos, state.filter]);
    
    // ç»Ÿè®¡ä¿¡æ¯ä¹Ÿä½¿ç”¨useMemoç¼“å­˜
    const stats = useMemo(() => ({
        total: state.todos.length,
        active: state.todos.filter(todo => !todo.completed).length,
        completed: state.todos.filter(todo => todo.completed).length
    }), [state.todos]);
    
    return (
        &lt;div&gt;
            &lt;TodoInput onAdd={(text) => dispatch({ type: 'ADD_TODO', payload: text })} /&gt;
            &lt;TodoFilters 
                current={state.filter}
                onChange={(filter) => dispatch({ type: 'SET_FILTER', payload: filter })}
            /&gt;
            &lt;TodoList 
                todos={filteredTodos}
                onToggle={(id) => dispatch({ type: 'TOGGLE_TODO', payload: id })}
                onDelete={(id) => dispatch({ type: 'DELETE_TODO', payload: id })}
            /&gt;
            &lt;TodoStats stats={stats} /&gt;
        &lt;/div&gt;
    );
};</code></pre>
                    </section>

                    <section id="measurement">
                        <h2>6. æ€§èƒ½æµ‹é‡</h2>
                        <p>æ€§èƒ½ä¼˜åŒ–éœ€è¦åŸºäºæ•°æ®ï¼Œè€Œä¸æ˜¯çŒœæµ‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„æ€§èƒ½æµ‹é‡æ–¹æ³•ã€‚</p>
                        
                        <h3>6.1 React DevTools Profiler</h3>
                        <pre><code class="language-jsx">import React, { Profiler } from 'react';

// æ€§èƒ½æµ‹é‡å›è°ƒ
const onRenderCallback = (id, phase, actualDuration, baseDuration, startTime, commitTime) => {
    console.log('ç»„ä»¶æ¸²æŸ“æ€§èƒ½:', {
        id,           // ç»„ä»¶æ ‡è¯†
        phase,        // 'mount' æˆ– 'update'
        actualDuration, // å®é™…æ¸²æŸ“æ—¶é—´
        baseDuration,   // ä¼°è®¡æ¸²æŸ“æ—¶é—´
        startTime,      // å¼€å§‹æ—¶é—´
        commitTime      // æäº¤æ—¶é—´
    });
    
    // å¯ä»¥å‘é€åˆ°åˆ†ææœåŠ¡
    if (actualDuration > 16) { // è¶…è¿‡16mså¯èƒ½å½±å“60fps
        analytics.track('slow_render', {
            component: id,
            duration: actualDuration,
            phase
        });
    }
};

const App = () => {
    return (
        &lt;Profiler id="App" onRender={onRenderCallback}&gt;
            &lt;Header /&gt;
            &lt;Profiler id="Dashboard" onRender={onRenderCallback}&gt;
                &lt;Dashboard /&gt;
            &lt;/Profiler&gt;
            &lt;Footer /&gt;
        &lt;/Profiler&gt;
    );
};</code></pre>

                        <h3>6.2 è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§Hook</h3>
                        <pre><code class="language-jsx">import { useEffect, useRef } from 'react';

// è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§Hook
const usePerformanceMonitor = (componentName) => {
    const renderCount = useRef(0);
    const startTime = useRef(0);
    
    useEffect(() => {
        renderCount.current += 1;
        const endTime = performance.now();
        
        if (startTime.current > 0) {
            const duration = endTime - startTime.current;
            console.log(`${componentName} æ¸²æŸ“ #${renderCount.current}, è€—æ—¶: ${duration.toFixed(2)}ms`);
        }
        
        startTime.current = endTime;
    });
    
    // è¿”å›æ€§èƒ½ç»Ÿè®¡
    return {
        renderCount: renderCount.current,
        measureRender: (callback) => {
            const start = performance.now();
            const result = callback();
            const end = performance.now();
            console.log(`${componentName} æ“ä½œè€—æ—¶: ${(end - start).toFixed(2)}ms`);
            return result;
        }
    };
};

// ä½¿ç”¨ç¤ºä¾‹
const ExpensiveComponent = ({ data }) => {
    const { renderCount, measureRender } = usePerformanceMonitor('ExpensiveComponent');
    
    const processedData = measureRender(() => {
        return data.map(item => ({
            ...item,
            processed: expensiveCalculation(item)
        }));
    });
    
    return (
        &lt;div&gt;
            &lt;p&gt;æ¸²æŸ“æ¬¡æ•°: {renderCount}&lt;/p&gt;
            {processedData.map(item => (
                &lt;div key={item.id}&gt;{item.name}&lt;/div&gt;
            ))}
        &lt;/div&gt;
    );
};</code></pre>

                        <h3>6.3 Web Vitalsç›‘æ§</h3>
                        <pre><code class="language-javascript">// å®‰è£…: npm install web-vitals
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

// æ”¶é›†æ€§èƒ½æŒ‡æ ‡
const sendToAnalytics = (metric) => {
    console.log(metric);
    
    // å‘é€åˆ°åˆ†ææœåŠ¡
    fetch('/api/analytics', {
        method: 'POST',
        body: JSON.stringify(metric),
        headers: { 'Content-Type': 'application/json' }
    });
};

// ç›‘æ§æ‰€æœ‰å…³é”®æŒ‡æ ‡
getCLS(sendToAnalytics);  // ç´¯ç§¯å¸ƒå±€åç§»
getFID(sendToAnalytics);  // é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ
getFCP(sendToAnalytics);  // é¦–æ¬¡å†…å®¹ç»˜åˆ¶
getLCP(sendToAnalytics);  // æœ€å¤§å†…å®¹ç»˜åˆ¶
getTTFB(sendToAnalytics); // é¦–å­—èŠ‚æ—¶é—´

// Reactç»„ä»¶ä¸­ä½¿ç”¨
const App = () => {
    useEffect(() => {
        // é¡µé¢åŠ è½½å®Œæˆåæµ‹é‡
        getLCP((metric) => {
            if (metric.value > 2500) { // LCPè¶…è¿‡2.5ç§’
                console.warn('LCPè¿‡æ…¢:', metric.value);
            }
        });
    }, []);
    
    return &lt;div&gt;{/* åº”ç”¨å†…å®¹ */}&lt;/div&gt;;
};</code></pre>
                    </section>

                    <!-- æ–‡ç« æ ‡ç­¾ -->
                    <div class="article-tags">
                        <h3>æ ‡ç­¾</h3>
                        <div class="tags-list">
                            <span class="tag">React</span>
                            <span class="tag">æ€§èƒ½ä¼˜åŒ–</span>
                            <span class="tag">è®°å¿†åŒ–</span>
                            <span class="tag">ä»£ç åˆ†å‰²</span>
                            <span class="tag">çŠ¶æ€ç®¡ç†</span>
                        </div>
                    </div>

                    <!-- åˆ†äº«æŒ‰é’® -->
                    <div class="article-share">
                        <h3>åˆ†äº«æ–‡ç« </h3>
                        <div class="share-buttons">
                            <button class="share-btn" data-platform="twitter">
                                <i class="fab fa-twitter"></i>
                                Twitter
                            </button>
                            <button class="share-btn" data-platform="linkedin">
                                <i class="fab fa-linkedin"></i>
                                LinkedIn
                            </button>
                            <button class="share-btn" data-platform="weibo">
                                <i class="fab fa-weibo"></i>
                                å¾®åš
                            </button>
                            <button class="share-btn" data-platform="copy">
                                <i class="fas fa-link"></i>
                                å¤åˆ¶é“¾æ¥
                            </button>
                        </div>
                    </div>
                </article>

                <!-- ä¾§è¾¹æ  -->
                <aside class="article-sidebar">
                    <!-- ä½œè€…ä¿¡æ¯ -->
                    <div class="author-card">
                        <div id="author-avatar-container">
                            <!-- ä½œè€…ä¿¡æ¯å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                        </div>
                    </div>

                    <!-- ç›¸å…³æ–‡ç«  -->
                    <div class="related-articles" style="opacity: 1 !important; visibility: visible !important; transform: none !important; transition: none !important;">
                        <h3 style="opacity: 1 !important; visibility: visible !important;">ç›¸å…³æ–‡ç« </h3>
                        <div class="related-list" style="opacity: 1 !important; visibility: visible !important;">
                            <article class="related-item" style="opacity: 1 !important; visibility: visible !important; transform: none !important;">
                                <h4 style="opacity: 1 !important; visibility: visible !important;"><a href="article.html" style="opacity: 1 !important; visibility: visible !important;">ç°ä»£å‰ç«¯å¼€å‘æœ€ä½³å®è·µ</a></h4>
                                <span class="related-date" style="opacity: 1 !important; visibility: visible !important;">2025-08-9</span>
                            </article>
                            <article class="related-item" style="opacity: 1 !important; visibility: visible !important; transform: none !important;">
                                <h4 style="opacity: 1 !important; visibility: visible !important;"><a href="responsive-design.html" style="opacity: 1 !important; visibility: visible !important;">å“åº”å¼è®¾è®¡å®Œæ•´æŒ‡å—</a></h4>
                                <span class="related-date" style="opacity: 1 !important; visibility: visible !important;">2025-08-09</span>
                            </article>
                        </div>
                    </div>

                    <!-- ç›®å½•å¯¼èˆª -->
                    <div class="toc-sidebar">
                        <h3>æ–‡ç« ç›®å½•</h3>
                        <ul class="toc-list">
                            <li><a href="#introduction" class="toc-link">æ€§èƒ½ä¼˜åŒ–æ¦‚è¿°</a></li>
                            <li><a href="#rendering" class="toc-link">æ¸²æŸ“ä¼˜åŒ–</a></li>
                            <li><a href="#memoization" class="toc-link">è®°å¿†åŒ–æŠ€æœ¯</a></li>
                            <li><a href="#code-splitting" class="toc-link">ä»£ç åˆ†å‰²</a></li>
                            <li><a href="#state-management" class="toc-link">çŠ¶æ€ç®¡ç†ä¼˜åŒ–</a></li>
                            <li><a href="#measurement" class="toc-link">æ€§èƒ½æµ‹é‡</a></li>
                        </ul>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <section class="comments-section">
        <div class="container">
            <h2>è¯„è®º (4)</h2>
            
            <!-- è¯„è®ºè¡¨å• -->
            <div class="comment-form">
                <h3>å‘è¡¨è¯„è®º</h3>
                <form>
                    <div class="form-row">
                        <input type="text" placeholder="æ‚¨çš„å§“å" required>
                        <input type="email" placeholder="æ‚¨çš„é‚®ç®±" required>
                    </div>
                    <textarea placeholder="æ‚¨çš„è¯„è®º..." rows="4" required></textarea>
                    <button type="submit">å‘è¡¨è¯„è®º</button>
                </form>
            </div>

            <!-- è¯„è®ºåˆ—è¡¨ -->
            <div class="comments-list">
                <div class="comment">
                    <div class="comment-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="comment-content">
                        <div class="comment-header">
                            <span class="comment-author">Reactå¼€å‘è€…</span>
                            <span class="comment-date">2025-08-09 10:30</span>
                        </div>
                        <p>å¤ªå®ç”¨äº†ï¼useMemoå’ŒuseCallbackçš„ä½¿ç”¨åœºæ™¯è®²å¾—å¾ˆæ¸…æ¥šï¼Œç‰¹åˆ«æ˜¯è‡ªå®šä¹‰è®°å¿†åŒ–Hookçš„å®ç°å¾ˆèµğŸ‘</p>
                        <div class="comment-actions">
                            <button class="reply-btn">å›å¤</button>
                            <button class="like-btn"><i class="fas fa-thumbs-up"></i> 12</button>
                        </div>
                    </div>
                </div>

                <div class="comment">
                    <div class="comment-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="comment-content">
                        <div class="comment-header">
                            <span class="comment-author">æ€§èƒ½ä¸“å®¶</span>
                            <span class="comment-date">2025-08-09 14:15</span>
                        </div>
                        <p>ä»£ç åˆ†å‰²çš„éƒ¨åˆ†å¾ˆè¯¦ç»†ï¼Œé”™è¯¯è¾¹ç•Œçš„å¤„ç†ä¹Ÿå¾ˆåˆ°ä½ã€‚å»ºè®®è¡¥å……ä¸€ä¸‹bundle analyzerçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
                        <div class="comment-actions">
                            <button class="reply-btn">å›å¤</button>
                            <button class="like-btn"><i class="fas fa-thumbs-up"></i> 8</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Tawyçš„ä¸ªäººåšå®¢. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="js/author-data.js"></script>
    <script src="script.js"></script>
    <script src="article.js"></script>
</body>
</html>
